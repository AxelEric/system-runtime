<!DOCTYPE html>
<html>
    <head>
        <title>05 - Import a system with a main method</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/prism.css" rel="stylesheet">
        <script src="js/prism.js"></script>

        <script type="text/javascript" src="../build/monoco-min.js"></script> 
        <script type="text/javascript" src="scripts/example05.js"></script>  

    </head>
    <body style="font-family:Arial">
        <h1>Example 05 - Import a system with a main method</h1>
        <hr/>
        <p>
            Look at the console of your browser to see the result of the script.
        </p> 
        <pre class="line-numbers"><code class="language-javascript">// the system as it was exported in example 04
var exportedSystem = {
    "schemas": {
        "Example04Schema": {
            "_name": "Example04Schema",
            "_inherit": ["MonocoComponentSchema"],
            "hello": "method",
            "_id": "Example04Schema"
        },
        "Example04": {
            "_name": "Example04",
            "_schema": "Example04Schema",
            "_inherit": ["MonocoComponent"],
            "hello": {
                "params": [{
                        "name": "name",
                        "type": "string"
                    }],
                "result": "string"
            },
            "_id": "Example04"
        }
    },
    "types": {},
    "behaviors": {
        "1ab8f19f971d7ef": {
            "_id": "1ab8f19f971d7ef",
            "component": "Example04",
            "state": "hello",
            "action": "function (name) {\n    return 'Hello ' + name + '!';\n}",
            "useCoreAPI": false
        },
        "10ece11fca14278": {
            "_id": "10ece11fca14278",
            "component": "1ec8c1262a1e4f4",
            "state": "main",
            "action": "function () {\n    var Example04 = this.require('Example04');\n\n    var example04 = new Example04();\n    var message = example04.hello('world');\n    \n    console.log(message);\n}",
            "useCoreAPI": false
        }
    },
    "components": {
        "Example04": {
            "164d419b211d8e0": {
                "classInfo": "Example04Info",
                "_id": "164d419b211d8e0"
            }
        }
    },
    "name": "example04",
    "version": "0.0.1",
    "description": "",
    "_id": "1ec8c1262a1e4f4"
};

// import the system
// the import returns the id of the imported system
var systemId = monoco.require('db').system(exportedSystem);

// a system is also a component, so it can be required
// then we call its "main" function to execute the code
var system = monoco.require(systemId);
system.main();</code></pre>
    </body>
</html>
