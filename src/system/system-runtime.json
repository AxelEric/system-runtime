{"_id":"e89c617b6b15d24","name":"system-runtime","description":"Runtime","version":"2.0.0","behaviors":{"13010167f313f87":{"_id":"13010167f313f87","component":"Runtime","state":"system","action":"function system(name) {\n    var System = null,\n    system = {},\n    systemId = '',\n    result = [],\n    conf = {};\n    \n    if (name) {\n        conf.master = true;\n        conf.name = name;\n        System = this.require('RuntimeSystem');\n        system = new System(conf);\n    } else {\n        result = $db.RuntimeSystem.find({\n            'master': true\n        });\n        if (result.length) {\n            systemId = result[0]._id;\n            system = $component.get(systemId);\n        }\n    }\n    return system;\n}","core":true,"useCoreAPI":true},"155141e40312cd8":{"_id":"155141e40312cd8","component":"RuntimeClassInfo","state":"collection","action":"function collection(name) {\n    var result = {};\n    if (this.metamodel()[name] === 'collection') {\n        result = this.model()[name];\n    } \n    \n    return result; \n}","core":true},"1f6941a0c012c1f":{"_id":"1f6941a0c012c1f","component":"RuntimeClassInfo","state":"collections","action":"function collections() {\n    var keys = Object.keys(this.metamodel()),\n    item = '',\n    result = [],\n    i = 0,\n    length = 0;\n    \n    length = keys.length; \n    \n    for (i = 0; i < length; i++) { \n        item = keys[i]; \n        if (this.metamodel()[item] === 'collection') {\n            result.push(item);\n        }\n    }\n    \n    return result;\n}","core":true},"1ef711b4171c849":{"_id":"1ef711b4171c849","component":"RuntimeClassInfo","state":"event","action":"function event(name) {\n    var result = {};\n    \n    if (this.metamodel()[name] === 'event') {\n        result = this.model()[name];\n    } \n    \n    return result;\n}","core":true},"1bae51b6ed1d25c":{"_id":"1bae51b6ed1d25c","component":"RuntimeClassInfo","state":"events","action":"function events() {\n    var keys = Object.keys(this.metamodel()),\n    item = '',\n    result = [],\n    i = 0,\n    length = 0;\n    \n    length = keys.length;\n    \n    for (i = 0; i < length; i++) {\n        item = keys[i];\n        if (this.metamodel()[item] === 'event') {\n            result.push(item);\n        }\n    } \n    return result;\n}","core":true},"19ac2125221528b":{"_id":"19ac2125221528b","component":"RuntimeClassInfo","state":"link","action":"function link(name) {\n    var result = {};\n    \n    if (this.metamodel()[name] === 'link') {\n        result = this.model()[name];\n    }\n    return result;\n}","core":true},"17ed21dfc01b8e8":{"_id":"17ed21dfc01b8e8","component":"RuntimeClassInfo","state":"links","action":"function links() { \n    var keys = Object.keys(this.metamodel()),\n    item = '',\n    result = [],\n    i = 0,\n    length = 0;\n    length = keys.length;\n    \n    for (i = 0; i < length; i++) {\n        item = keys[i];\n        if (this.metamodel()[item] === 'link') {\n            result.push(item);\n        }\n    } return result;\n}","core":true},"11ce318a561ac61":{"_id":"11ce318a561ac61","component":"RuntimeClassInfo","state":"method","action":"function method(name) {\n    var result = {};\n    if (this.metamodel()[name] === 'method') {\n        result = this.model()[name];\n        \n    }\n    \n    return result;\n}","core":true},"12ff2190a018046":{"_id":"12ff2190a018046","component":"RuntimeClassInfo","state":"methods","action":"function methods() {\n    var keys = Object.keys(this.metamodel()),\n    item = '',\n    result = [],\n    i = 0,\n    length = 0;\n    length = keys.length;\n    for (i = 0; i < length; i++) {\n        item = keys[i];\n        if (this.metamodel()[item] === 'method') {\n            result.push(item);\n        }\n    } \n    \n    return result;\n}","core":true},"1028d1681e1fd58":{"_id":"1028d1681e1fd58","component":"RuntimeClassInfo","state":"properties","action":"function properties() { \n    var keys = Object.keys(this.metamodel()),\n    item = '',\n    result = [],\n    i = 0,\n    length = 0;\n    length = keys.length;\n    \n    for (i = 0; i < length; i++) {\n        item = keys[i];\n        if (this.metamodel()[item] === 'property') {\n            result.push(item);\n        }\n    } return result;\n}","core":true},"18eeb10c5319368":{"_id":"18eeb10c5319368","component":"RuntimeClassInfo","state":"property","action":"function property(name) {\n    var result = {};\n    \n    if (this.metamodel()[name] === 'property') {\n        result = this.model()[name];\n    }\n    return result;\n}","core":true},"1ba721201114b6b":{"_id":"1ba721201114b6b","component":"RuntimeComponent","state":"destroy","action":"function destroy() {\n    $component.destroy(this.id());\n}","core":true,"useCoreAPI":true},"15486186f41a48c":{"_id":"15486186f41a48c","component":"RuntimeComponent","state":"off","action":"function off(state, behaviorId) {\n    var args = [],\n    i = 0,\n    length = 0;\n    length = arguments.length;\n    \n    for (i = 0; i < length - 7; i++) {\n        args.push(arguments[i]);\n    }\n    \n    if ($workflow.checkParams({\n        \"component\": this, \n        \"methodName\": \"off\", \n        \"args\": args\n        })) {\n        \n        if (state || behaviorId) {\n            if ($metamodel.isValidState(state, this.constructor.name)) {\n                $behavior.remove({\n                    \"behaviorId\": behaviorId, \n                    \"componentId\": this.id(), \n                    \"state\": state\n                });\n            } else { \n                this.require('logger').warn(\"invoke \\'off\\' method of component '\" + this.id() + \"' with an invalid state '\" + state + \"'\"); \n            }\n        } else {\n            $behavior.remove({\n                \"componentId\": this.id()\n            });\n        }\n    }\n}","core":true,"useCoreAPI":true},"1da0a17878104c3":{"_id":"1da0a17878104c3","component":"RuntimeComponent","state":"require","action":"function require(id) {\n    return $component.get(id);\n}","core":true,"useCoreAPI":true},"1a5111d17a1800c":{"_id":"1a5111d17a1800c","component":"RuntimeDatabase","state":"collections","action":"function collections() {\n    var result = {},\n    collectionName = '';\n    \n    for (collectionName in $db.store) {\n        if ($db.store.hasOwnProperty(collectionName) && collectionName.indexOf('Runtime') !== 0) {\n            result[collectionName] = $db[collectionName];\n            \n        }\n    }\n    return result;\n}","core":true,"useCoreAPI":true},"1e5bf167ca1b61e":{"_id":"1e5bf167ca1b61e","component":"RuntimeDatabase","state":"subsystem","action":"function subsystem(params) {\n    return $db.subsystem(params);\n}","core":true,"useCoreAPI":true},"15ab1112e81b1b4":{"_id":"15ab1112e81b1b4","component":"RuntimeDatabase","state":"system","action":"function system(system) {\n    return $db.system(system);\n}","core":true,"useCoreAPI":true},"1d993108fa18ef2":{"_id":"1d993108fa18ef2","component":"RuntimeLogger","state":"debug","action":"function debug(message) {\n    if (this.level() === 'debug') {\n        console.log('runtime: ' + message);\n    }\n}","core":true},"1a37a188e11fe73":{"_id":"1a37a188e11fe73","component":"RuntimeLogger","state":"error","action":"function error(message) {\n    console.error('runtime: ' + message);\n}","core":true},"1edd21e12a16534":{"_id":"1edd21e12a16534","component":"RuntimeLogger","state":"info","action":"function info(message) {\n    if (this.level() === 'info' || this.level() === 'debug') {\n        console.info('runtime: ' + message);\n    }\n}","core":true},"141f2143d3122a4":{"_id":"141f2143d3122a4","component":"RuntimeLogger","state":"level","action":"function level(val) {\n    $log.level(val);\n}","core":true,"useCoreAPI":true},"192401bab21304e":{"_id":"192401bab21304e","component":"RuntimeLogger","state":"warn","action":"function warn(message) {\n    if (this.level() === 'info' || this.level() === 'warn' || this.level() === 'debug') {\n        console.warn('runtime: ' + message);\n    } \n}","core":true},"11fc715e2f1a31e":{"_id":"11fc715e2f1a31e","component":"RuntimeMetamodel","state":"create","action":"function create() {\n        $metamodel.create();\n}","core":true,"useCoreAPI":true},"1232f1f107142cf":{"_id":"1232f1f107142cf","component":"RuntimeMetamodel","state":"model","action":"function model(model) {\n    return $metamodel.model(model);\n}","core":true,"useCoreAPI":true},"1365412f69153d2":{"_id":"1365412f69153d2","component":"RuntimeMetamodel","state":"schema","action":"function schema(schema) {\n    return $metamodel.schema(schema);\n}","core":true,"useCoreAPI":true},"194db147fe161a2":{"_id":"194db147fe161a2","component":"RuntimeMetamodel","state":"type","action":"function type(type) {\n    return $metamodel.type(type);\n}","core":true,"useCoreAPI":true},"129f71568717a22":{"_id":"129f71568717a22","component":"RuntimeSystem","state":"sync","action":"function sync() {\n    var system = JSON.parse($db.system());\n    \n    this.schemas(system.schemas);\n    this.types(system.types);\n    this.behaviors(system.behaviors);\n    this.components(system.components);\n}","core":true,"useCoreAPI":true}},"schemas":{"12e211d4cd120a6":{"_id":"12e211d4cd120a6","_name":"Runtime","_inherit":["RuntimeComponent"],"_core":true,"version":"property","system":"method"},"1ac07185641fa9f":{"_name":"RuntimeBehavior","_inherit":["RuntimeComponent"],"_core":true,"core":"property","component":"property","action":"property","state":"property","useCoreAPI":"property","_id":"1ac07185641fa9f"},"104ad1f48518376":{"_id":"104ad1f48518376","_name":"RuntimeChannel","_inherit":["RuntimeComponent"],"_core":true,"send":"event"},"1c00b13a1b1bc92":{"_name":"RuntimeClassInfo","_inherit":["RuntimeComponent"],"_core":true,"model":"property","metamodel":"property","method":"method","methods":"method","property":"method","properties":"method","link":"method","links":"method","collections":"method","collection":"method","event":"method","events":"method","_id":"1c00b13a1b1bc92"},"111df11e2b19fde":{"_id":"111df11e2b19fde","_name":"RuntimeComponent","_inherit":[],"_core":true,"classInfo":"property","on":"method","off":"method","require":"method","destroy":"method","init":"method","error":"event"},"1723516a30132ac":{"_name":"RuntimeDatabase","_inherit":["RuntimeComponent"],"_core":true,"system":"method","subsystem":"method","collections":"method","insert":"event","update":"event","remove":"event","_id":"1723516a30132ac"},"1268f1dddd1fea7":{"_name":"RuntimeLogger","_core":true,"level":"property","debug":"method","info":"method","warn":"method","error":"method","_id":"1268f1dddd1fea7"},"14caa1c46414ee1":{"_name":"RuntimeMessage","_inherit":[],"_core":true,"event":"property","from":"property","data":"property","_id":"14caa1c46414ee1"},"193f1166eb16609":{"_name":"RuntimeMetamodel","_inherit":["RuntimeComponent"],"_core":true,"schema":"method","model":"method","type":"method","create":"method","_id":"193f1166eb16609"},"158711d6f215e4b":{"_name":"RuntimeState","_inherit":[],"_core":true,"_class":false,"name":"property","parameters":"property","_id":"158711d6f215e4b"},"1cb761fa4510dca":{"_name":"RuntimeSystem","_inherit":["RuntimeComponent"],"_core":true,"name":"property","master":"property","subsystem":"property","version":"property","description":"property","schemas":"property","models":"property","behaviors":"property","types":"property","components":"property","sync":"method","main":"method","ready":"event","_id":"1cb761fa4510dca"}},"models":{"14c7c105b31a160":{"_id":"14c7c105b31a160","_name":"Runtime","_core":true,"version":{"type":"string","readOnly":true,"mandatory":true,"default":"0.0.0"},"system":{"params":[{"name":"name","type":"string","mandatory":false}],"result":"object"}},"166971fd9d107fd":{"_name":"RuntimeBehavior","_core":true,"core":{"type":"boolean","readOnly":false,"mandatory":false,"default":false},"useCoreAPI":{"type":"boolean","readOnly":false,"mandatory":false,"default":false},"component":{"type":"string","readOnly":false,"mandatory":true,"default":""},"action":{"type":"javascript","readOnly":false,"mandatory":true,"default":""},"state":{"type":"string","readOnly":false,"mandatory":true,"default":""},"_id":"166971fd9d107fd"},"135c71078810af2":{"_id":"135c71078810af2","_name":"RuntimeChannel","_core":true,"send":{"params":[{"name":"message","type":"object"}]}},"158321dced1014a":{"_name":"RuntimeClassInfo","_core":true,"metamodel":{"type":"object","readOnly":true,"mandatory":true,"default":{}},"model":{"type":"object","readOnly":true,"mandatory":true,"default":{}},"property":{"params":[{"name":"name","type":"string"}],"result":"object"},"properties":{"result":"array"},"link":{"params":[{"name":"name","type":"string"}],"result":"object"},"links":{"result":"array"},"method":{"params":[{"name":"name","type":"string"}],"result":"object"},"methods":{"result":"array"},"collection":{"params":[{"name":"name","type":"string"}],"result":"object"},"collections":{"result":"array"},"event":{"params":[{"name":"name","type":"string"}],"result":"object"},"events":{"result":"array"},"_id":"158321dced1014a"},"123751cb591de26":{"_id":"123751cb591de26","_name":"RuntimeComponent","_core":true,"on":{"params":[{"name":"state","type":"string"},{"name":"handler","type":"function"},{"name":"useCoreAPI","type":"boolean","mandatory":false,"default":false},{"name":"isCore","type":"boolean","mandatory":false,"default":false}]},"off":{"params":[{"name":"state","type":"string","mandatory":false},{"name":"behaviorId","type":"string","mandatory":false}]},"require":{"params":[{"name":"id","type":"string"}]},"destroy":{"params":[]},"classInfo":{"type":"@RuntimeClassInfo","readOnly":false,"mandatory":false,"default":{}},"init":{"params":[{"name":"conf","type":"object"}]},"error":{"params":[{"name":"data","type":"errorParam"}]}},"18a51169d7112d4":{"_name":"RuntimeDatabase","_core":true,"system":{"params":[{"name":"system","type":"object","mandatory":false}],"result":"string"},"subsystem":{"params":[{"name":"params","type":"object"}],"result":"string"},"collections":{"result":"object"},"insert":{"params":[{"name":"classId","type":"string"},{"name":"object","type":"object"}]},"update":{"params":[{"name":"schema","type":"string"},{"name":"componentId","type":"string"},{"name":"attributeName","type":"string"},{"name":"attributeValue","type":"object"}]},"remove":{"params":[{"name":"classId","type":"string"},{"name":"object","type":"string"}]},"_id":"18a51169d7112d4"},"16b9d1ac2216ffe":{"_name":"RuntimeLogger","_core":true,"level":{"type":"log","readOnly":false,"mandatory":false,"default":"warn"},"debug":{"params":[{"name":"message","type":"string"}]},"info":{"params":[{"name":"message","type":"string"}]},"warn":{"params":[{"name":"message","type":"string"}]},"error":{"params":[{"name":"message","type":"string"}]},"_id":"16b9d1ac2216ffe"},"1d9b6139411aa91":{"_name":"RuntimeMessage","_core":true,"event":{"type":"string","readOnly":false,"mandatory":true,"default":""},"from":{"type":"string","readOnly":false,"mandatory":true,"default":""},"data":{"type":"array","readOnly":false,"mandatory":true,"default":[]},"_id":"1d9b6139411aa91"},"1628c13c22152e6":{"_name":"RuntimeMetamodel","_core":true,"schema":{"params":[{"name":"schema","type":"object"}],"result":"any"},"model":{"params":[{"name":"model","type":"object"}],"result":"any"},"type":{"params":[{"name":"type","type":"object"}],"result":"any"},"create":{"params":[]},"_id":"1628c13c22152e6"},"177ac136891629f":{"_name":"RuntimeState","_core":true,"name":{"type":"string","readOnly":false,"mandatory":true,"default":""},"parameters":{"type":"object","readOnly":false,"mandatory":false,"default":{}},"_id":"177ac136891629f"},"170521b88614387":{"_name":"RuntimeSystem","_core":true,"name":{"type":"string","readOnly":false,"mandatory":true,"default":""},"master":{"type":"boolean","readOnly":false,"mandatory":false,"default":false},"subsystem":{"type":"boolean","readOnly":false,"mandatory":false,"default":false},"version":{"type":"string","readOnly":false,"mandatory":false,"default":"0.0.1"},"description":{"type":"string","readOnly":false,"mandatory":false,"default":""},"schemas":{"type":"object","readOnly":false,"mandatory":false,"default":{}},"models":{"type":"object","readOnly":false,"mandatory":false,"default":{}},"behaviors":{"type":"object","readOnly":false,"mandatory":false,"default":{}},"types":{"type":"object","readOnly":false,"mandatory":false,"default":{}},"components":{"type":"object","readOnly":false,"mandatory":false,"default":{}},"ready":{},"sync":{},"main":{},"_id":"170521b88614387"}},"types":{"collection":{"name":"collection","type":"object","schema":{"type":{"type":["string"],"mandatory":true},"readOnly":{"type":"boolean","mandatory":true},"mandatory":{"type":"boolean","mandatory":true},"default":{"type":"object","mandatory":true},"description":{"type":"string","mandatory":false},"label":{"type":"string","mandatory":false}},"core":true},"css":{"name":"css","type":"string","core":true},"date":{"name":"date","type":"object","core":true},"errorParam":{"name":"errorParam","type":"object","schema":{"message":{"type":"string","mandatory":true},"error":{"type":"object","mandatory":true}},"core":true},"event":{"name":"event","type":"object","schema":{"params":{"type":["parameter"],"mandatory":false},"description":{"type":"string","mandatory":false}},"core":true},"html":{"name":"html","type":"string","core":true},"javascript":{"name":"javascript","type":"string","core":true},"json":{"name":"json","type":"object","core":true},"link":{"name":"link","type":"object","schema":{"type":{"type":"string","mandatory":true},"readOnly":{"type":"boolean","mandatory":true},"mandatory":{"type":"boolean","mandatory":true},"default":{"type":"@type","mandatory":true},"description":{"type":"string","mandatory":false},"label":{"type":"string","mandatory":false}},"core":true},"log":{"name":"log","type":"string","value":["debug","info","warn","error"],"core":true},"message":{"name":"message","type":"object","schema":{"event":{"type":"string","mandatory":true},"from":{"type":"string","mandatory":false},"data":{"type":"object","mandatory":true}},"core":true},"method":{"name":"method","type":"object","schema":{"result":{"type":"string","mandatory":false},"params":{"type":["parameter"],"mandatory":false},"description":{"type":"string","mandatory":false}},"core":true},"parameter":{"name":"parameter","type":"object","schema":{"name":{"type":"string","mandatory":true},"type":{"type":"string","mandatory":true},"mandatory":{"type":"boolean","mandatory":false},"default":{"type":"@type","mandatory":false}},"core":true},"property":{"name":"property","type":"object","schema":{"type":{"type":"string","mandatory":true},"readOnly":{"type":"boolean","mandatory":true},"mandatory":{"type":"boolean","mandatory":true},"default":{"type":"@type","mandatory":true},"description":{"type":"string","mandatory":false},"label":{"type":"string","mandatory":false}},"core":true}},"components":{"Runtime":{"runtime":{"_id":"runtime","version":"2.0.0"}},"RuntimeDatabase":{"db":{"_id":"db"}},"RuntimeLogger":{"logger":{"_id":"logger"}},"RuntimeMetamodel":{"metamodel":{"_id":"metamodel"}},"RuntimeSystem":{}},"master":true,"subsystem":false}